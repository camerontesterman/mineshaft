#!/usr/bin/ruby
#
# ruby-venv
#
# author:: Cameron Testerman
# email:: cameronbtesterman@gmail.com
# created:: 2017-04-14 1:19PM
#
# Copyright (c) 2017 Cameron Testerman

require "ruby-venv"
require "optparse"

options = {}

parser = OptionParser.new do |opts|
  opts.banner = "usage: ruby-venv [options] environment"

  opts.on("-v", "--version", "displays the current version of ruby-venv") do
    puts RubyVenv::VERSION[:name] + " " + RubyVenv::VERSION[:number]
    exit
  end

  opts.on("-r",
          "--ruby-version VERSION",
          "specify the version of Ruby to install"
         ) do |version|
    options[:version] = version
  end
end

parser.parse!

unless ARGV.last.nil?
  environment = RubyVenv::Environment.new(ARGV.last)
  environment.create

  ruby = RubyVenv::Install.new
  version = options[:version].nil? ? ruby.get_latest_stable : options[:version]
end
